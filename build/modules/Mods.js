// Generated by CoffeeScript 2.0.3
// Wiki Monkey - MediaWiki bot and editor-assistant user script
// Copyright (C) 2011 Dario Giovannetti <dev@dariogiovannetti.net>

// This file is part of Wiki Monkey.

// Wiki Monkey is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.

// Wiki Monkey is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.

// You should have received a copy of the GNU General Public License
// along with Wiki Monkey.  If not, see <http://www.gnu.org/licenses/>.
var CSS;

CSS = require('../../lib.js.generic/dist/CSS');

module.exports = (function() {
  var changeHeadingNumberStyle, disableEditSummarySubmitOnEnter, hideRollbackLinks, scrollToFirstHeading;

  class exports {
    constructor(WM) {
      this.WM = WM;
    }

    applyGeneralMods() {
      var conf;
      conf = this.WM.Cfg.Mods.General;
      if (conf['heading_number_style']) {
        return changeHeadingNumberStyle(conf['heading_number_style']);
      }
    }

    applyEditorMods() {
      var conf;
      conf = this.WM.Cfg.Mods.Editor;
      if (conf['disable_edit_summary_submit_on_enter']) {
        disableEditSummarySubmitOnEnter();
      }
      if (conf['scroll_to_first_heading']) {
        return scrollToFirstHeading();
      }
    }

    applyRecentChangesMods() {
      var conf;
      conf = this.WM.Cfg.Mods.RecentChanges;
      if (conf['hide_rollback_links']) {
        return hideRollbackLinks();
      }
    }

    applyContributionsMods() {
      var conf;
      conf = this.WM.Cfg.Mods.Contributions;
      if (conf['hide_rollback_links']) {
        return hideRollbackLinks();
      }
    }

  };

  changeHeadingNumberStyle = function(style) {
    return CSS.addStyleElement("span.mw-headline-number {" + style + "}");
  };

  disableEditSummarySubmitOnEnter = function() {
    return $('#wpSummary').keydown(function(event) {
      // 'keyCode' is deprecated, but not all browsers support 'key' yet
      if (event.key === 'Enter' || (typeof event.key === 'undefined' && event.keyCode === 13)) {
        event.preventDefault();
        return false;
      }
    });
  };

  hideRollbackLinks = function() {
    return CSS.addStyleElement("span.mw-rollback-link {display:none;}");
  };

  scrollToFirstHeading = function() {
    return window.scrollTo(0, $('#firstHeading').offset().top);
  };

  return exports;

})();
