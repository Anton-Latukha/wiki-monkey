// Generated by CoffeeScript 2.0.3
// Wiki Monkey - MediaWiki bot and editor-assistant user script
// Copyright (C) 2011 Dario Giovannetti <dev@dariogiovannetti.net>

// This file is part of Wiki Monkey.

// Wiki Monkey is free software: you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation, either version 3 of the License, or
// (at your option) any later version.

// Wiki Monkey is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.

// You should have received a copy of the GNU General Public License
// along with Wiki Monkey.  If not, see <http://www.gnu.org/licenses/>.
module.exports = class exports {
  constructor(WM, config, installed_plugins) {
    this.WM = WM;
    this.installed_plugins = installed_plugins;
    this.load(config);
  }

  load(config) {
    var results, sconfig, section, tconfig, thissection, thistype, type;
    results = [];
    for (section in config) {
      sconfig = config[section];
      if (this[section] == null) {
        this[section] = {};
      }
      thissection = this[section];
      results.push((function() {
        var results1;
        results1 = [];
        for (type in sconfig) {
          tconfig = sconfig[type];
          if (thissection[type] == null) {
            thissection[type] = {};
          }
          thistype = thissection[type];
          if (tconfig) {
            // Don't do a deep (recursive) merge! It would also merge
            // the plugins' arguments, and also other possible
            // unexpected effects
            results1.push($.extend(thistype, tconfig));
          } else {
            results1.push(void 0);
          }
        }
        return results1;
      })());
    }
    return results;
  }

};
